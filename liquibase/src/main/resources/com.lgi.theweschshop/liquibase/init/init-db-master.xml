<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet author="iyurchenko" id="lgi_database:release_1.1colorTable">
        <createTable tableName="colorTable">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="iyurchenko" id="lgi_database:release_1.1">
        <createSequence catalogName="colorTable" incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        ordered="true"
                        sequenceName="color_seq_id"
                        startValue="1"/>
    </changeSet>

    <changeSet author="iyurchenko" id="lgi_database:release_1.1sizeTable">
        <createTable tableName="sizeTable">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="iyurchenko" id="lgi_database:release_1.1">
        <createSequence catalogName="sizeTable" incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        ordered="true"
                        sequenceName="size_seq_id"
                        startValue="1"/>
    </changeSet>

    <changeSet author="iyurchenko" id="lgi_database:release_1.1typeTable">
        <createTable tableName="typeTable">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="iyurchenko" id="lgi_database:release_1.1pictureTable">
        <createTable tableName="pictureTable">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="picture" type="bytea">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="iyurchenko" id="lgi_database:release_1.1">
        <createSequence catalogName="typeTable" incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        ordered="true"
                        sequenceName="type_seq_id"
                        startValue="1"/>
    </changeSet>


    <changeSet author="iyurchenko" id="lgi_database:release_1.1elementTable">
        <createTable tableName="elementTable">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="comment" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="gender" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="creation_date" type="timestamp">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="iyurchenko" id="lgi_database:release_1.1">
        <createSequence catalogName="elementTable" incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        ordered="true"
                        sequenceName="element_seq_id"
                        startValue="1"/>
    </changeSet>

    <!--<**********************************************************>-->
    <!--<**********************************************************>-->
    <changeSet author="iyurchenko" id="lgi_database:release_1.1elementSizeTypeColorTable">
        <createTable tableName="element_size_type_color">
            <column name="element_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="size_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="type_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="color_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="amount" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementElementElement">
        <addForeignKeyConstraint constraintName="fk_estc_element"
                                 baseTableName="element_size_type_color" baseColumnNames="element_id" referencedTableName="elementTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementSizeColor">
        <addForeignKeyConstraint constraintName="fk_estc_size"
                                 baseTableName="element_size_type_color" baseColumnNames="size_id" referencedTableName="sizeTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementTypeElement">
        <addForeignKeyConstraint constraintName="fk_estc_type"
                                 baseTableName="element_size_type_color" baseColumnNames="type_id" referencedTableName="typeTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementColorColor">
        <addForeignKeyConstraint constraintName="fk_estc_color"
                                 baseTableName="element_size_type_color" baseColumnNames="color_id" referencedTableName="colorTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <!--<**********************************************************>-->
    <!--<**********************************************************>-->

    <changeSet author="iyurchenko" id="lgi_database:release_1.1elementColorTable">
        <createTable tableName="element_color">
            <column name="elementId" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="colorId" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementColorElement">
        <addForeignKeyConstraint constraintName="fk_ec_element"
                                 baseTableName="element_color" baseColumnNames="elementId" referencedTableName="elementTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementColorColor">
        <addForeignKeyConstraint constraintName="fk_ec_color"
                                 baseTableName="element_color" baseColumnNames="colorId" referencedTableName="colorType"
                                 referencedColumnNames="id"/>
    </changeSet>
    <!--<**********************************************************>-->
    <changeSet author="iyurchenko" id="lgi_database:release_1.1elementSizeTable">
        <createTable tableName="element_size">
            <column name="elementId" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="sizeId" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementSizeElement">
        <addForeignKeyConstraint constraintName="fk_es_element"
                                 baseTableName="element_size" baseColumnNames="elementId" referencedTableName="elementTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementSizeSize">
        <addForeignKeyConstraint constraintName="fk_es_size"
                                 baseTableName="element_size" baseColumnNames="sizeId" referencedTableName="sizeTable"
                                 referencedColumnNames="id"/>
    </changeSet>

    <!--<**********************************************************>-->

    <changeSet author="iyurchenko" id="lgi_database:release_1.1elementTypeTable">
        <createTable tableName="element_type">
            <column name="elementId" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="typeId" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementTypeElement">
        <addForeignKeyConstraint constraintName="fk_et_element"
                                 baseTableName="element_type" baseColumnNames="elementId" referencedTableName="elementTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementTypeType">
        <addForeignKeyConstraint constraintName="fk_et_type"
                                 baseTableName="element_type" baseColumnNames="typeId" referencedTableName="typeTable"
                                 referencedColumnNames="id"/>
    </changeSet>

    <!--<**********************************************************>-->


    <changeSet author="iyurchenko" id="lgi_database:release_1.1elementPictureTable">
        <createTable tableName="element_picture">
            <column name="elementId" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="picture" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementPictureElement">
        <addForeignKeyConstraint constraintName="fk_ep_element"
                                 baseTableName="element_picture" baseColumnNames="elementId" referencedTableName="elementTable"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="lgi_database:release_1.1fkElementPicturePicture">
        <addForeignKeyConstraint constraintName="fk_ep_picture"
                                 baseTableName="element_picture" baseColumnNames="pictureId" referencedTableName="pictureTable"
                                 referencedColumnNames="id"/>
    </changeSet>

    <!--<**********************************************************>-->

    <changeSet author="iyurchenko" id="lgi_database:release_1.1">
        <createTable tableName="emr">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="emrDate" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="emrTypeId" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="patientId" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="doctorId" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="iyurchenko" id="whirl_database:release_1.1">
        <createSequence catalogName="emr" incrementBy="1"
                        maxValue="9223372036854775807"
                        minValue="1"
                        ordered="true"
                        sequenceName="emr_seq_id"
                        startValue="1"/>
    </changeSet>

    <changeSet author="iyurchenko" id="whirl_database:release_1.1fkEMRDoctor">
        <addForeignKeyConstraint constraintName="fk_emr_doctor"
                                 baseTableName="emr" baseColumnNames="doctorId" referencedTableName="doctor"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="whirl_database:release_1.1fkEMRPatient">
        <addForeignKeyConstraint constraintName="fk_emr_patient"
                                 baseTableName="emr" baseColumnNames="patientId" referencedTableName="patient"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet author="iyurchenko" id="whirl_database:release_1.1fkEMREMRType">
        <addForeignKeyConstraint constraintName="fk_emr_emrType"
                                 baseTableName="emr" baseColumnNames="emrTypeId" referencedTableName="emrType"
                                 referencedColumnNames="id"/>
    </changeSet>




</databaseChangeLog>